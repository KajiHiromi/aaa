# **4.Gitコマンドの基礎**

# Git
		
## Gitとは
	* 分散型バージョン管理システム
	* ファイルの状態を好きなときに更新履歴として保存しておくことができる。
	そのため、一度編集したファイルを過去の状態に戻したり、編集箇所の差分を表示したりすることができる。


### リポジトリ
	* ファイルやディレクトリの状態を記録する場所
		- リモートリポジトリ
			専用のサーバーに配置して複数人で共有するためのリポジトリ
		- ローカルリポジトリ　
			ユーザー人ひとりが利用するために、自分の手元のマシン上に配置するリポジトリ
               
	* [ローカルリポジトリ]→→→→→→(push)→→→→→→[リモートリポジトリ]
	* [ローカルリポジトリ]←←←←(pull)←←←[リモートリポジトリ]

　
### ワークツリーとインデックス
	* Gitの管理下に置かれた、作業しているディレクトリのことを**ワークツリー**と呼ぶ
	* リポジトリとワークツリーの間にはインデックスというものが存在する
		インデックスとは、リポジトリにコミットする準備をするための場所
	   
	[リポジトリ]←(コミット)←[インデックス]←(登録)←[ワークツリー]←(ファイル編集)
　
　　　　
  
## Gitのコミット
	* ファイルやディレクトリの追加・変更を、リポジトリに記録する操作
	* 直前のバージョンから一つ先のバージョンへ「変更の固まり」あるいは「差分」として記録する。
	* $ git commit


## Clone
	* リモートリポジトリを複製するには、クローン(clone)操作を行う
	* クローンを実行すると、リモートリポジトリの内容をまるまるダウンロードしてきて、
	別のマシンにローカルリポジトリとして作成できる


## Gitのブランチ
	* 並行して行われる複数の機能追加やバージョン管理を支援するための機能
	* つまり、履歴の流れを分岐して記録していくための機能
	* 分岐したブランチは他のブランチの影響を受けないため、同じリポジトリ中で複数の変更を同時に進めていくことができる
		(リポジトリに最初のコミットを行うと、Gitはmasterという名前のブランチを作成する)


### ブランチの切り替え
 	* 作業するブランチを切り替えるには、チェックアウトという操作を行う
 		−　HEAD
			* 現在使用しているブランチの先頭を表す名前
			* ブランチ名ではなく、ハッシュ名を指す


### コミットの相対的な指定
	* ハッシュを見つける
	* $ git log
	*ハッシュ名は実際のGitの世界では長い文字列である。そのため、Gitでは長いハッシュ名の代わりに相対的に指定する方法がある
	
		− ハット「＾」オペレータを使用し１回で１つ前のコミットを指定
			* master^  masterの最初の親コミット
			* master^^ おじいちゃん世代のコミット　を指す
　
		− チルダ「〜(num)」オペレータを使用して任意の個数分前のコミットを指定
			* $ git checkout HEAD~3
　             


## ブランチを一つにまとめる方法
	−　マージ
	−　リベース

### マージ　git merge
		* mergeコマンドによって、２つの独立した親を持つ特別なコミットを作ることができる　
		* 変更内容の履歴はそのまま残るが、履歴が複雑になる
 
### リベース　git Rebase
 		* マージするコミットのコピーをとり、どこかにストンと落とすイメージ
		* メリット：一本の連続したシーケンシャルなコミットに整形できること
		* 履歴は単純になるが、元のコミットから変更内容が変更される.そのため、元のコミットを動かない状態にしてしまうことがある
	

***************************************************************************************************************


## ブランチの使用例
	* 新しいディレクトリ作成
		- $ mkdir tutorial
	* 移動　　
		- $ cd tutorial
	* tutorialディレクトリ内にリポジトリ作成
		- $ git init
	* tutorialディレクトリにmyfile.txtファイルを作成し、コミット(-m でコメントをつけることができる)
		- $ git add myfile.txt
		- $ git commit -m "first commit"　 

	* issue1ブランチを作成
		- $ git branch issue1
	* 引数を指定せずにbranchコマンドを実行すると、ブランチの一覧を表示(頭に*のついているものが現在のブランチ)
		- $ git branch
			issue1
			*master
	
	* ブランチをissue1に切り替える
		- $ git checkout issue1
	* myfile.txtの変更を記録することをリクエスト
		- $ git add myfile.txt
	* どのファイルの内容への変更が新しく作るコミットに含まれるか確認
		- $ git status
	* コミット
		- $ git commit -m "コメント"
		   
	* issue1ブランチに行った変更をmasterブランチに統合
		- $ git checkout master
		- $ git merge issue1
		(- $ git rebase issue1)
		(１本のブランチ上でシーケンシャルに開発されていたかのように見せること可能)
          
         
	* issue1ブランチを削除するし、確認
		- $ git branch -d issue1
		- $ git branch
			*master		 　
	
	* 変更を元に戻す
	* 1.前のコミットを削除
		- $ git reset HEAD
		- logコマンドで履歴が削除されていることを確認
		- $ git log

	* 2.削除するというコミットを追加　
		- $ git revert　HEAD
		- logコマンドで削除するというコミットが実行されていることを確認
		- $ git log
 
 
	* 元のリポジトリからクローンしてくる
		- $ git clone [git://git.~]
	* 2度目以降、長いURLをタイプするのを避けるため、shortnameを「origin」と設定
		- $ git remote add [shortname] [url]
		- $ git remote add origin [url]
	
	* push
		- $ git push [remote-name][branch-name]
		- $ git push origin master
	
	* fetch(データをリモートリポジトリから取得)
		- $ git fetch [remote-name]	
		- $ git fetch origin
	* pull(自動的にfetchを行い、リモートブランチの内容を現在のブランチにマージする)
		- $ git pull origin
		
		
		
(参照)
	* [サルでもわかるGit入門][1]
	* [Gitの基本-リモートでの作業][2]
	* [git-簡単ガイド(猫でもわかるGitの最初の一歩)][3]
[1]: http://www.backlog.jp/git-guide/　"サルでもわかるGit入門"
[2]: http://git-scm.com/book/ja/Git-%E3%81%AE%E5%9F%BA%E6%9C%AC-%E3%83%AA%E3%83%A2%E3%83%BC%E3%83%88%E3%81%A7%E3%81%AE%E4%BD%9C%E6%A5%AD "Gitの基本-リモートでの作業"
[3]: http://rogerdudler.github.io/git-guide/index.ja.html "git-簡単ガイド(猫でもわかるGitの最初の一歩)"
    


　

